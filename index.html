<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IFC.js Components Viewer</title>
    <script type="module">
      import {
        SimpleViewerApp,
        DefaultIfcLoader
      } from "https://cdn.jsdelivr.net/npm/@thatopen/components@latest";

      window.onload = async () => {
        const viewer = new SimpleViewerApp({
          container: document.getElementById("viewer-container"),
          loader: new DefaultIfcLoader(),
        });

        const urlParams = new URLSearchParams(window.location.search);
        const ifcPath = urlParams.get("model") || "https://civilengspreadsheets.github.io/test_3D_viewer/structure.ifc";
        const expressID = urlParams.get("id");

        const model = await viewer.loadIfcUrl(ifcPath);

        if (expressID) {
          const id = parseInt(expressID);
          viewer.select(model, [id]);
          viewer.zoomTo(model, [id]);
        }
      };
    </script>
    <style>
      html, body { margin: 0; height: 100%; overflow: hidden; }
      #viewer-container { width: 100vw; height: 100vh; }
    </style>
  </head>
  <body>
    <div id="viewer-container"></div>
  </body>
</html>
